<?xml version="1.0" encoding="utf-8"?>
<InstructionData xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <DateTime>132968890070583878</DateTime>
  <GameVersion>0.2.3262.16260</GameVersion>
  <Title>SMARTSUIT</Title>
  <Description>â€‹</Description>
  <Author>onebit</Author>
  <WorkshopFileHandle>0</WorkshopFileHandle>
  <Instructions>define MINO2PP 25
define MAXTEMP 50
define MINTEMP 10
define MAXPRES 125
define MINPRES 80
define MAXTOXIN 0.45
define MAXNO2 4.5
define CTOK 273.15

alias Suit db
alias Helmet d0
alias Jetpack d1

alias suitpres r0
alias extpres r0
alias manualclosed r1
alias ratio r2
alias open r3
alias stayclosed r5
alias exttemp r7
alias exppos r8
alias hazard r9
alias oop r10
alias temp1 r11
alias pp r12
alias extreme r13
alias manualopened r14
s Helmet Volume 50
loop:
l suitpres Suit Pressure
l ratio Suit RatioOxygen
mul pp ratio suitpres
slt open pp MINO2PP
s Suit Filtration open
jal checkhazard
l open Helmet Open
#xor helmetchanged open lastopen
not temp1 open
s Suit AirRelease temp1
# remain autoclosed if helmet is not open
sne oop exppos open
and manualclosed oop temp1
and manualopened oop open
beqal manualopened 1 manuallyopened
beqal manualclosed 1 manuallyclosed
beq open 0 checkopen
beq open 1 checkclose
done:
yield
j loop
manuallyopened:
s Helmet SoundAlert 20
move hazard 0
move exppos 1
move stayclosed 0
j ra
manuallyclosed:
s Helmet SoundAlert 21
move exppos 0
move stayclosed 1
j ra
checkopen:
# don't open helmet if manually opened
beq stayclosed 1 done
# don't open helmet if hazardous
beq hazard 1 done
beq extreme 1 done
s Helmet SoundAlert 20
s Helmet Open 1
move exppos 1
j done
checkclose:
beq extreme 1 autoclose
beq hazard 1 autoclose
j done
checkhazard:
#close if toxins are present
l ratio Suit RatioPollutant
l temp1 Suit RatioVolatiles
add ratio ratio temp1
mul pp ratio suitpres
bge pp MAXTOXIN hazarddetected
# close if no2 is present
l ratio Suit RatioNitrousOxide
mul pp ratio suitpres
bge pp MAXNO2 hazarddetected
# close if pressure is extreme
l extpres Suit PressureExternal
bge extpres MAXPRES preshigh
ble extpres MINPRES preslow
# close if temp is extreme
l exttemp Suit TemperatureExternal
add temp1 MAXTEMP CTOK
bge exttemp temp1 temphigh
add temp1 MINTEMP CTOK
ble exttemp temp1 templow
move extreme 0
j ra
preshigh:
s Helmet SoundAlert 39
j extremeenv
preslow:
s Helmet SoundAlert 40
j extremeenv
templow:
s Helmet SoundAlert 42
j extremeenv
temphigh:
s Helmet SoundAlert 41
j extremeenv
extremeenv:
move extreme 1
j ra
hazarddetected:
s Helmet SoundAlert 43
move hazard 1
j ra
autoclose:
s Helmet Open 0
move exppos 0
j done</Instructions>
</InstructionData>